<!DOCTYPE html>
<html lang="en">
<head>
    <title>hi <%= name %></title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="m-5">
<h1 class="text-xl mb-3">hello, <%= name %></h1>

<div>
    <h2 class="text-xl text-center mb-3">Your API is working</h2>
    <div class="flex justify-center">
        <div class="grid xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2  gap-2 ">
            <% routes.forEach(item => { %>
                <div class="border border-black p-5">
                    <h2 class="pb-3">API at route  /<%= item.routerName %></h2>
                    <pre><%= JSON.stringify(item.RouteData, null, 2) %></pre>
                    <button onclick="deleteRoute('<%= item.routerName %>')">delete</button>

                </div>
            <% }); %>
        </div>
    </div>

</div>
  <script>
      function deleteRoute(routeName) {
          let confirm=window.confirm(`Are you sure you want to delete this route( /${routeName} )?`);
          if (confirm){
                fetch(`/api/${routeName}`, {
                    method: 'DELETE',
                }).then(res => {
                    if (res.ok) {
                        window.location.reload();
                    }
                })
          }else {
              console.log("deletetion was cancelled")
          }
      }
  </script>
</body>
</html>
